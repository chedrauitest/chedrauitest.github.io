<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Detalle del Producto</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <header>
        <h1>Mi Tienda</h1>
        
        <div class="cart-container" onclick="window.location.href='carrito.html'">
            <svg class="cart-icon" viewBox="0 0 24 24">
                <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
            </svg>
            <span id="cart-count" class="cart-badge">0</span>
        </div>
    </header>

    <div class="container">
        <button onclick="window.history.back()" style="background:#7f8c8d; margin-bottom:20px;">&larr; Volver</button>
        
        <div id="detalle-container" class="detail-view">
            <p>Cargando...</p>
        </div>
    </div>

    <script src="data.js"></script>
    <script>
        // 1. Obtener el ID de la URL
        const idProducto = getParam('id');
        const contenedor = document.getElementById('detalle-container');

        // 2. Buscar el producto en nuestra "base de datos"
        const producto = PRODUCTOS.find(p => p.id == idProducto);

        if (producto) {
            // 3. Renderizar
            contenedor.innerHTML = `
                <img src="${producto.imagen}" class="detail-img">
                <h2>${producto.nombre}</h2>
                <p>${producto.desc}</p>
                <h3 style="color: #27ae60;">${formatMoney(producto.precio)}</h3>
                <hr>
                <button onclick="Carrito.agregar(${producto.id})">Agregar al Carrito</button>
                <br><br>
                <a href="carrito.html" style="color: #2c3e50; text-decoration: underline;">Ir a ver mi Carrito</a>
            `;
        } else {
            contenedor.innerHTML = "<h2>Producto no encontrado :(</h2>";
        }

        function irAPagar(id) {
            window.location.href = `pago.html?id=${id}`;
        }
    </script>
</body>
</html>
